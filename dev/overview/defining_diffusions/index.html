<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Defining diffusions · DiffusionDefinition.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DiffusionDefinition.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Overview</span><ul><li class="is-active"><a class="tocitem" href>Defining diffusions</a><ul class="internal"><li><a class="tocitem" href="#Customisation-of-a-struct-1"><span>Customisation of a struct</span></a></li></ul></li><li><a class="tocitem" href="../load_diff/">Loading diffusions</a></li><li><a class="tocitem" href="../sampling/">Sampling trajectories</a></li><li><a class="tocitem" href="../convenience_functions/">Convenience functions</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/lotka_volterra/">Lotka-Volterra system</a></li><li><a class="tocitem" href="../../examples/sine/">Sine diffusion</a></li><li><a class="tocitem" href="../../examples/sir/">SIR model</a></li><li><a class="tocitem" href="../../examples/lorenz63/">Lorenz63 system</a></li><li><a class="tocitem" href="../../examples/lorenz96/">Lorenz96 system</a></li><li><a class="tocitem" href="../../examples/favetto_samson/">Favetto-Samson model</a></li><li><a class="tocitem" href="../../examples/prokaryote/">Prokaryotic autoregulatory gene network</a></li><li><a class="tocitem" href="../../examples/fitzhugh_nagumo/">FitzHugh-Nagumo model</a></li><li><a class="tocitem" href="../../examples/jansen_rit/">Jansen-Rit model</a></li></ul></li><li><a class="tocitem" href="../../post_index/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Overview</a></li><li class="is-active"><a href>Defining diffusions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Defining diffusions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDiffusionBayes/DiffusionDefinition.jl/blob/master/docs/src/overview/defining_diffusions.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Defining-diffusion-1"><a class="docs-heading-anchor" href="#Defining-diffusion-1">Defining diffusion</a><a class="docs-heading-anchor-permalink" href="#Defining-diffusion-1" title="Permalink"></a></h1><p>The main utility macro introduced in this package is <code>@diffusion_process</code>. It facilitates very concise definitions of structs characterizing diffusion processes.</p><p>There are two (optionally three, third is not used now) parts expected by the macro:</p><ul><li>the name of the diffusion (which may contain template parameters in the curly brackets)</li><li>and the recipe for defining a struct</li><li>(the third one, not used for now, we denote as POSTVARIABLES):</li></ul><pre><code class="language-julia">@diffusion_process NAME{TEMPLATE_PARAMETERS} begin
  RECIPE
end POSTVARIABLES</code></pre><p>the snippet of code above creates a struct named <code>NAME</code> according to specifications listed in the <code>RECIPE</code>.</p><h2 id="Customisation-of-a-struct-1"><a class="docs-heading-anchor" href="#Customisation-of-a-struct-1">Customisation of a struct</a><a class="docs-heading-anchor-permalink" href="#Customisation-of-a-struct-1" title="Permalink"></a></h2><p>The <code>RECIPE</code> may contain information pertinent to five distinct categories:</p><ul><li>Specification of <code>:dimensions</code></li><li>Specification of <code>:parameters</code> (their names and datatypes)</li><li>Specification of <code>:auxiliary_info</code></li><li>Specification of <code>:conjugate</code> updates</li><li><code>:additional</code> information</li></ul><p>Each type needs to be announced to <code>julia</code> by starting the list with the corresponding <code>Symbol</code> (or <code>QuoteNode</code>).</p><h3 id="Example-1"><a class="docs-heading-anchor" href="#Example-1">Example</a><a class="docs-heading-anchor-permalink" href="#Example-1" title="Permalink"></a></h3><p>It&#39;s best to look at a simple example. Consider the definition of a Lorenz system:</p><pre><code class="language-julia">@diffusion_process Lorenz{T} begin
    :dimensions
    process --&gt; 3
    wiener --&gt; 3

    :parameters
    _ --&gt; (3, T)
    σ --&gt; Float64

    :additional
    constdiff --&gt; true
end</code></pre><p>The macro above expands to:</p><pre><code class="language-julia">struct Lorenz{T} &lt;: DiffusionProcess{Float64,3,3,UnboundedStateSpace()}
    p1::T
    p2::T
    p3::T
    σ::Float64
    function Lorenz(p1::T, p2::T, p3::T, σ::Float64) where T
        new{T}(p1, p2, p3, σ)
    end
end</code></pre><p>which defines a <a href="https://docs.julialang.org/en/v1/manual/types/#Parametric-Types-1">parametric type</a> <code>Lorenz{T}</code>, together with some handy auxiliary functions specific to any instance of <code>Lorenz{T}</code>. We may now instantiate the newly defined struct as in</p><pre><code class="language-julia">P_f64 = Lorenz(1.0, 2.0, 3.0, 0.2)
P_SVectors = Lorenz([rand(DD.ℝ{3}) for i in 1:3]..., 0.2)</code></pre><p>We can also call some functions auto-generated for the newly defined <code>Lorenz</code> struct, for instance</p><pre><code class="language-julia">DD.param_names(P_f64) == (:p1, :p2, :p3, :σ)
DD.parameters(P_f64) == (1.0, 2.0, 3.0, 4.0)</code></pre><p>There are in fact more functions that are being defined, see <a href="/overview/convenience_functions/">Convenience Functions</a> for all functions that are being defined for each generated struct.</p><h3 id="More-systematic-explanations-1"><a class="docs-heading-anchor" href="#More-systematic-explanations-1">More systematic explanations</a><a class="docs-heading-anchor-permalink" href="#More-systematic-explanations-1" title="Permalink"></a></h3><p>The following information can be specified when using <code>@diffusion_process</code>.</p><h4 id=":dimensions-(alternative,-accepted-names:-:dim,-:dims,-:dimension)-1"><a class="docs-heading-anchor" href="#:dimensions-(alternative,-accepted-names:-:dim,-:dims,-:dimension)-1"><code>:dimensions</code> (alternative, accepted names: <code>:dim</code>, <code>:dims</code>, <code>:dimension</code>)</a><a class="docs-heading-anchor-permalink" href="#:dimensions-(alternative,-accepted-names:-:dim,-:dims,-:dimension)-1" title="Permalink"></a></h4><p>Specification of the dimension of the process and the dimension of the driving Brownian motion. Must be written in a format: <code>process --&gt; dimension</code> OR <code>wiener --&gt; dimension</code> (eg. <code>process --&gt; 4</code>)</p><h4 id=":parameters-(also-accepts:-:param,-:params)-1"><a class="docs-heading-anchor" href="#:parameters-(also-accepts:-:param,-:params)-1"><code>:parameters</code> (also accepts: <code>:param</code>, <code>:params</code>)</a><a class="docs-heading-anchor-permalink" href="#:parameters-(also-accepts:-:param,-:params)-1" title="Permalink"></a></h4><p>List of all parameters that the law depends on. Must be in one of the following formats (anywhere, if the parameter-name is set to <code>_</code> then uses default names based on a letter <code>p</code>):</p><ul><li><code>single-parameter-name --&gt; single-data-type</code> (eg. <code>σ --&gt; Float64</code> or <code>σ --&gt; T</code> (if <code>T</code> is a template argument) or <code>_ --&gt; Vector{Int32}</code>). This defines a single parameter.</li><li><code>single-parameter-name --&gt; (multiple-data-types,)</code> (eg. <code>σ --&gt; (Float64, Int64)</code>, <code>_ --&gt; (Int32, T)</code>). This defines as many parameters as there are specified types and appends the names with numbers to disambiguate multiple parameters with the same names.</li><li><code>single-parameter-name --&gt; (number-of-parameters, data-type)</code> (eg. <code>σ --&gt; (3, Float64)</code>) defines <code>number-of-parameters</code>-many parameters of the same data type.</li><li><code>(multiple-parameter-names,) --&gt; single-data-type</code> (eg. <code>(α, β, γ) --&gt; Int64</code>) defines as many parameters as there are names specified and sets them to be of the same type.</li><li><code>(multiple-parameter-names,) --&gt; (multiple-data-types,)</code> (eg. <code>(α, β, γ) --&gt; (Float64, Int64, T)</code>) defines as many parameters as there are names specified (there should be an equal number of names as there are types) and sets them to be of corresponding type.</li></ul><h4 id=":auxiliary_info-(also-accepts:-:aux_info,-:end_points,-:end_point_info)-1"><a class="docs-heading-anchor" href="#:auxiliary_info-(also-accepts:-:aux_info,-:end_points,-:end_point_info)-1"><code>:auxiliary_info</code> (also accepts: <code>:aux_info</code>, <code>:end_points</code>, <code>:end_point_info</code>)</a><a class="docs-heading-anchor-permalink" href="#:auxiliary_info-(also-accepts:-:aux_info,-:end_points,-:end_point_info)-1" title="Permalink"></a></h4><p>Information about the end-points of the diffusion. This is a useful feature for guided proposals or simulation of diffusion bridges, where the process is conditioned to hit certain end-point. The following fields can be defined:</p><ul><li><code>t0</code> (also accepts <code>:t_0</code>): the starting time-point</li><li><code>T</code>: the final time-point</li><li><code>x0</code> (also accepts <code>:y0</code>, <code>:state0</code>, <code>:x_0</code>, <code>:y_0</code>, <code>:state_0</code>): the starting position</li><li><code>v0</code> (also accepts <code>:obs0</code>, <code>:v_0</code>, <code>:obs_0</code>): the starting observation</li><li><code>vT</code> (also accepts <code>:obsT</code>, <code>:v_T</code>, <code>:obs_T</code>): the observation at the terminal time</li><li><code>xT</code> (also accepts <code>:yT</code>, <code>:stateT</code>, <code>:x_T</code>, <code>:y_T</code>, <code>:state_T</code>): the state of the process at the terminal time</li></ul><p>Each one of these fields can be defined in a format <code>field-name --&gt; field-type</code>, for instance <code>T --&gt; Float64</code>. <strong>IMPORTANT</strong> If at least one of the fields above is defined, then the field <code>xT</code> will be defined automatically and the diffusion constructor will default <code>xT</code> to a zero vector (or SVector or a Number, it will make a reasonable guess, but it may be wrong). The reason for this is to make employment of a blocking technique in other packages a bit easier.</p><h4 id=":conjugate-1"><a class="docs-heading-anchor" href="#:conjugate-1"><code>:conjugate</code></a><a class="docs-heading-anchor-permalink" href="#:conjugate-1" title="Permalink"></a></h4><p>This is a section need to be present if conjugate Gaussian updates are to be made in the setting of Bayesian inference. Three pieces of information can be specified:</p><ul><li>Function <code>phi</code></li><li>Function <code>nonhypo</code> in a format <code>nonhypo(x) --&gt; non-smooth-coordinates-of-x</code> which specifies which coordinates of <code>x</code> have non-degenerate noise on them.</li><li><code>num_non_hypo</code> which specifies how many coordinates are with non-degenerate noise on them [TODO change to a simple count of <code>nonhypo</code> output length]</li></ul><h4 id=":additional-(also-accepts:-:extra)-1"><a class="docs-heading-anchor" href="#:additional-(also-accepts:-:extra)-1"><code>:additional</code> (also accepts: <code>:extra</code>)</a><a class="docs-heading-anchor-permalink" href="#:additional-(also-accepts:-:extra)-1" title="Permalink"></a></h4><p>The additional information provides some additional decorators that helps the compiler use specialised functions when called on instances of corresponding diffusion processes. The following paramters can be specified</p><ul><li><code>constdiff --&gt; true</code> (or <code>false</code>) depending on whether the volatility coefficient is independent from the state variable (<code>false</code> by default)</li><li><code>linear --&gt; true</code> (or <code>false</code>) to indicate that a diffusion has a linear structure (<code>false</code> by default).</li><li><code>statespace --&gt; type-of-state-space-restrictions</code> (eg. <code>statespace --&gt; UnboundedStateSpace()</code>) indicates any restrictions made on the state-space of a diffusion process.</li><li><code>eltype --&gt; type-of-parameter</code> (eg. <code>eltype --&gt; Float64</code>) disambiguate the parameter type in case multiple types are used. This is useful for automatic differentiation where the derivatives of only a subset of parameters are taken and it is the eltype of those parameters that is of interest.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../load_diff/">Loading diffusions »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 21 April 2020 17:00">Tuesday 21 April 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
